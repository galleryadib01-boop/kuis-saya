<!DOCTYPE html>
<html lang="id">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>Snake ‚Äî Adib Edition</title>
  <style>
    :root {
      --bg: #0f1724;
      --panel: #1e293b;
      --accent: #22c55e;
      --muted: #94a3b8;
      --danger: #ef4444;
      --font: system-ui, -apple-system, "Segoe UI", Roboto, "Helvetica Neue", Arial;
    }

    * { box-sizing: border-box; }
    html, body {
      height: 100%;
      margin: 0;
      font-family: var(--font);
      background: radial-gradient(circle at center, #0f1724, #020617);
      color: #e6eef8;
      text-align: center;
    }

    /* MENU UTAMA */
    #mainMenu {
      display: none;
      margin-top: 120px;
    }

    .menu-buttons {
      display: flex;
      flex-direction: column;
      align-items: center;
      gap: 15px;
      margin-top: 30px;
    }

    button {
      background: var(--accent);
      color: white;
      border: none;
      padding: 12px 30px;
      border-radius: 10px;
      font-size: 18px;
      font-weight: 700;
      letter-spacing: 1px;
      
      cursor: pointer;
      transition: transform 0.2s, background 0.3s;
      width: 220px;
    }

    button:hover {
      background: #16a34a;
      transform: scale(1.05);
    }

    /* MENU INPUT NAMA */
    #nameInputMenu, #leaderboardMenu, #settingsMenu {
      display: none;
      background: var(--panel);
      border-radius: 12px;
      padding: 30px;
      width: 350px;
      margin: 100px auto;
      box-shadow: 0 0 20px rgba(34,197,94,0.3);
    }

    /* Tambahkan jarak antar tombol di menu input nama */
    #nameInputMenu button {
      display: block;
      margin: 10px auto; /* kasih jarak antar tombol */
      width: 80%;
    }

    #playBtn {
      margin-bottom: 20px; /* tombol ‚ÄúMulai Bermain‚Äù agak turun biar gak nempel dengan tombol ‚ÄúKembali‚Äù */
    }


    input[type="text"] {
      padding: 10px;
      width: 80%;
      border: none;
      border-radius: 6px;
      margin-bottom: 15px;
      font-size: 16px;
    }

    /* GAME CONTAINER */
    #gameContainer {
      display: none;
      margin-top: 40px;
    }

    #gameBoard {
      background: #1e293b;
      border: 2px solid var(--accent);
      margin: 20px auto;
      display: block;
    }

    /* LEADERBOARD */
    #leaderboardList {
      list-style: none;
      padding: 0;
      margin: 0;
      display: flex;
      flex-direction: column;
      align-items: center;
      gap: 10px;
    }

    #backFromLeaderboard {
  margin-top: 40px; /* ‚úÖ biar agak turun */
  background: linear-gradient(135deg, #a39a16, #22c55e); /* üåà gradient hijau */
  color: white;
  border: none;
  padding: 12px 30px;
  border-radius: 10px;
  font-size: 18px;
  font-weight: 700;
  cursor: pointer;
  transition: transform 0.2s, box-shadow 0.3s;
  box-shadow: 0 0 15px rgba(34, 197, 94, 0.4);
}

#backFromLeaderboard:hover {
  transform: scale(1.05);
  box-shadow: 0 0 25px rgba(34, 197, 94, 0.6);
}


    #leaderboardList li {
      background: linear-gradient(135deg, #22c55e, #0ea5e9);
      color: white;
      margin: 8px 0;
      padding: 12px 16px;
      border-radius: 10px;
      width: 230px;
      font-weight: 600;
      letter-spacing: 0.5px;
      box-shadow: 0 0 15px rgba(34,197,94,0.5);
      display: flex;
      justify-content: space-between;
      align-items: center;
      transition: transform 0.2s ease, box-shadow 0.3s ease;
    }

    #leaderboardList li:hover {
      transform: scale(1.05);
      box-shadow: 0 0 25px rgba(14,165,233,0.6);
    }

  </style>
</head>
<body>
  <!-- MENU UTAMA -->
  <div id="mainMenu">
    <h1>üêç Snake ‚Äî Adib Edition</h1>
    <div class="menu-buttons">
      <button id="startGameBtn">Main Game</button>
      <button id="leaderboardBtn">Leaderboard</button>
      <button id="settingsBtn">Setting</button>
    </div>
  </div>

  <!-- INPUT NAMA -->
  <div id="nameInputMenu">
    <h2>Masukkan Nama Kamu</h2>
    <input type="text" id="playerNameInput" placeholder="Contoh: Adib" />
    <button id="playBtn">Mulai Bermain</button>
    <button id="backToMenuBtn">Kembali</button>
  </div>

  <!-- GAME -->
  <div id="gameContainer">
    <h2 id="playerNameDisplay"></h2>
    <canvas id="gameBoard" width="400" height="400"></canvas>
    <h3>Skor: <span id="scoreDisplay">0</span></h3>
    <button id="exitBtn">Keluar</button>
  </div>

  <!-- LEADERBOARD -->
  <div id="leaderboardMenu">
    <h2>üèÜ Leaderboard</h2>
    <ul id="leaderboardList"></ul>
    <button id="backFromLeaderboard">Kembali</button>
  </div>

  <!-- SETTINGS -->
  <div id="settingsMenu">
    <h2>üéµ Pengaturan Suara</h2>
    <label>
      <input type="checkbox" id="soundToggle" checked /> Suara Aktif
    </label><br><br>
    <button id="backFromSettings">Kembali</button>
  </div>

  <script>
    const mainMenu = document.getElementById('mainMenu');
    const nameInputMenu = document.getElementById('nameInputMenu');
    const leaderboardMenu = document.getElementById('leaderboardMenu');
    const settingsMenu = document.getElementById('settingsMenu');
    const gameContainer = document.getElementById('gameContainer');

    const startGameBtn = document.getElementById('startGameBtn');
    const leaderboardBtn = document.getElementById('leaderboardBtn');
    const settingsBtn = document.getElementById('settingsBtn');
    const playBtn = document.getElementById('playBtn');
    const backToMenuBtn = document.getElementById('backToMenuBtn');
    const backFromLeaderboard = document.getElementById('backFromLeaderboard');
    const backFromSettings = document.getElementById('backFromSettings');
    const playerNameInput = document.getElementById('playerNameInput');
    const playerNameDisplay = document.getElementById('playerNameDisplay');
    const scoreDisplay = document.getElementById('scoreDisplay');
    const gameBoard = document.getElementById('gameBoard');
    const exitBtn = document.getElementById('exitBtn');
    const leaderboardList = document.getElementById('leaderboardList');
    const soundToggle = document.getElementById('soundToggle');

    let playerName = "";
    let score = 0;
    let leaderboard = JSON.parse(localStorage.getItem('leaderboard')) || [];
    let soundEnabled = true;

    mainMenu.style.display = 'block'; // tampilkan menu utama pertama kali

    // ====== NAVIGASI MENU ======
    startGameBtn.onclick = () => {
      mainMenu.style.display = 'none';
      nameInputMenu.style.display = 'block';
    };

    leaderboardBtn.onclick = () => {
      mainMenu.style.display = 'none';
      showLeaderboard();
    };

    settingsBtn.onclick = () => {
      mainMenu.style.display = 'none';
      settingsMenu.style.display = 'block';
    };

    backToMenuBtn.onclick = () => {
      nameInputMenu.style.display = 'none';
      mainMenu.style.display = 'block';
    };

    backFromLeaderboard.onclick = () => {
      leaderboardMenu.style.display = 'none';
      mainMenu.style.display = 'block';
      
      
    };

    backFromSettings.onclick = () => {
      settingsMenu.style.display = 'none';
      mainMenu.style.display = 'block';
    };

    soundToggle.onchange = () => {
      soundEnabled = soundToggle.checked;
    };

    // ====== GAME LOGIC ======
    const ctx = gameBoard.getContext('2d');
    const grid = 20;
    let snake, food, dx, dy, game;

    playBtn.onclick = () => {
      playerName = playerNameInput.value.trim();
      if (!playerName) {
        alert("Masukkan nama dulu, Adib!");
        return;
      }
      nameInputMenu.style.display = 'none';
      gameContainer.style.display = 'block';
      playerNameDisplay.textContent = "Pemain: " + playerName;
      startGame();
    };

    function startGame() {
      snake = [{ x: 160, y: 200 }];
      dx = grid;
      dy = 0;
      score = 0;
      food = randomFood();
      scoreDisplay.textContent = score;
      document.addEventListener('keydown', changeDirection);
      game = setInterval(updateGame, 100);
    }

    function randomFood() {
      return {
        x: Math.floor(Math.random() * 20) * grid,
        y: Math.floor(Math.random() * 20) * grid
      };
    }

    function updateGame() {
      const head = { x: snake[0].x + dx, y: snake[0].y + dy };

      if (head.x < 0 || head.x >= 400 || head.y < 0 || head.y >= 400 ||
          snake.some(seg => seg.x === head.x && seg.y === head.y)) {
        endGame();
        return;
      }

      snake.unshift(head);

      if (head.x === food.x && head.y === food.y) {
        score++;
        scoreDisplay.textContent = score;
        food = randomFood();
      } else {
        snake.pop();
      }

      ctx.clearRect(0, 0, 400, 400);
      ctx.fillStyle = getAccent();
      snake.forEach(seg => ctx.fillRect(seg.x, seg.y, grid - 2, grid - 2));
      ctx.fillStyle = "#ef4444";
      ctx.fillRect(food.x, food.y, grid - 2, grid - 2);
    }

    function changeDirection(e) {
      switch (e.key) {
        case "ArrowUp": if (dy === 0) { dx = 0; dy = -grid; } break;
        case "ArrowDown": if (dy === 0) { dx = 0; dy = grid; } break;
        case "ArrowLeft": if (dx === 0) { dx = -grid; dy = 0; } break;
        case "ArrowRight": if (dx === 0) { dx = grid; dy = 0; } break;
      }
    }

    function getAccent() {
      return getComputedStyle(document.documentElement).getPropertyValue('--accent');
    }

    function endGame() {
      clearInterval(game);
      alert(`Game Over, ${playerName}! Skor kamu: ${score}`);
      saveLeaderboard(playerName, score);
      gameContainer.style.display = 'none';
      mainMenu.style.display = 'block';
    }

    exitBtn.onclick = () => {
      clearInterval(game);
      gameContainer.style.display = 'none';
      mainMenu.style.display = 'block';
    };

    // ====== LEADERBOARD ======
    function saveLeaderboard(name, score) {
      leaderboard.push({ name, score });
      leaderboard.sort((a, b) => b.score - a.score);
      leaderboard = leaderboard.slice(0, 5);
      localStorage.setItem('leaderboard', JSON.stringify(leaderboard));
    }

    function showLeaderboard() {
      leaderboardMenu.style.display = 'block';
      leaderboardList.innerHTML = leaderboard.length
        ? leaderboard.map((e, i) => `<li><span>#${i + 1}</span><span>${e.name}</span><span>${e.score}</span></li>`).join("")
        : "<li>Belum ada skor</li>";
    }
  </script>
</body>
</html>
